<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Ù†Ø¸Ø§Ù… Ø§Ù„ØªÙ‚Ø§Ø±ÙŠØ± Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠØ©</title>
  <style>
    @import url('https://fonts.googleapis.com/css2?family=Tajawal:wght@400;500;700;800;900&display=swap');
    :root{
      --primary:#10b981;
      --secondary:#059669;
      --dark:#047857;
      --light:#d1fae5;
      --accent:#fbbf24;
      --text:#0f172a;
      --gray:#475569;
      --container:94vw;
      --card-bg:#ffffff;
      --shadow:0 4px 12px rgba(16,185,129,.1);
    }
    
    *{
      margin:0;
      padding:0;
      box-sizing:border-box;
      -webkit-tap-highlight-color:transparent;
    }
    
    html, body{
      font-family:'Tajawal',sans-serif;
      background:linear-gradient(135deg,#f0fdf4 0%,#dcfce7 50%,#f0fdf4 100%);
      color:var(--text);
      line-height:1.65;
      min-height:100vh;
      overflow-x:hidden;
      font-size:16px;
    }

    /* Ø§Ù„Ù‡ÙŠØ¯Ø± */
    .header-logo{
      background:#fff;
      position:sticky;
      top:0;
      z-index:1000;
      box-shadow:0 4px 12px rgba(16,185,129,.1);
      border-bottom:2px solid var(--light);
      padding:8px 0;
    }
    
    .header-logo .wrap{
      width:var(--container);
      max-width:1200px;
      margin:0 auto;
      padding:0 12px;
      display:flex;
      justify-content:center;
      align-items:center;
      flex-direction: column;
    }
    
    .header-logo img{
      height:84px;
      width:auto;
      object-fit:contain;
    }
    
    .header-text {
      text-align: center;
      margin-top: 10px;
    }
    
    .header-text h1 {
      color: var(--dark);
      font-size: 1.8rem;
      margin-bottom: 5px;
    }
    
    .header-text p {
      color: var(--gray);
      font-size: 1rem;
    }
    
    .quran-verse {
      margin-top: 10px;
      font-size: 1.1rem;
      font-weight: 500;
      color: var(--dark);
    }

    /* Ø§Ù„ØªÙ†Ù‚Ù„ Ø¨ÙŠÙ† Ø§Ù„ØªÙ‚Ø§Ø±ÙŠØ± */
    nav {
      background:linear-gradient(135deg, var(--primary) 0%, var(--secondary) 100%);
      padding: 15px 0;
      box-shadow: 0 4px 12px rgba(16,185,129,.2);
    }
    
    .nav-container {
      width: var(--container);
      max-width: 1200px;
      margin: 0 auto;
      padding: 0 12px;
    }
    
    .nav-title {
      color: white;
      text-align: center;
      margin-bottom: 15px;
      font-size: 1.3rem;
      font-weight: 700;
    }
    
    .cards-container {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
      gap: 20px;
    }
    
    .card {
      background: var(--card-bg);
      border-radius: 12px;
      padding: 20px;
      box-shadow: var(--shadow);
      transition: all 0.3s ease;
      cursor: pointer;
      border: 1px solid rgba(0,0,0,0.05);
      display: flex;
      flex-direction: column;
      align-items: center;
      text-align: center;
      height: 100%;
    }
    
    .card:hover {
      transform: translateY(-5px);
      box-shadow: 0 10px 20px rgba(0,0,0,0.15);
    }
    
    .card .icon {
      font-size: 2.5rem;
      margin-bottom: 15px;
      color: var(--primary);
      background: rgba(16, 185, 129, 0.1);
      width: 70px;
      height: 70px;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
    }
    
    .card .title {
      font-size: 1.1rem;
      font-weight: 700;
      margin-bottom: 10px;
      color: var(--dark);
    }
    
    .card .subtitle {
      font-size: 0.85rem;
      color: #6c757d;
      display: flex;
      justify-content: center;
      flex-wrap: wrap;
      gap: 8px;
      margin-top: 5px;
    }
    
    .card .subtitle span {
      background: #e9ecef;
      padding: 4px 10px;
      border-radius: 20px;
      font-size: 0.75rem;
    }
    
    .card.featured {
      border-top: 4px solid var(--accent);
    }
    
    .card.reports {
      border-top: 4px solid var(--primary);
    }
    
    .card.activities {
      border-top: 4px solid var(--secondary);
    }

    /* Ø¥Ø·Ø§Ø± Ø§Ù„Ø¹Ø±Ø¶ */
    #iframe-container {
      width: 100%;
      height: 80vh;
      display: none;
      margin-top: 20px;
      padding: 0 1rem;
    }
    
    #content-frame {
      width: 100%;
      height: 100%;
      border-radius: 12px;
      box-shadow: var(--shadow);
      border: none;
    }

    /* ØµÙØ­Ø© Ø§Ù„Ù…Ø­ØªÙˆÙ‰ Ø§Ù„Ù…Ø­Ù„ÙŠ (Ø­ØµØ© Ø§Ù„Ø§Ù†ØªØ¸Ø§Ø±) */
    #local-pages{
      width:100%;
      max-width:1200px;
      margin:20px auto 40px;
      padding:0 1rem 80px;
      display:none;
    }

    .card-page{
      background:linear-gradient(135deg,#ffffff 0%,#ecfdf5 100%);
      padding:22px;
      border-radius:18px;
      box-shadow:0 10px 30px rgba(15,118,110,.12);
    }

    .wait-title{
      color:var(--dark);
      text-align:center;
      margin-bottom:10px;
      font-size:1.4rem;
      font-weight:900;
    }
    .wait-intro{
      text-align:center;
      color:var(--gray);
      font-size:.95rem;
      margin-bottom:18px;
    }

    .form{
      display:grid;
      gap:14px;
    }
    .grid-3{
      display:grid;
      grid-template-columns:1fr;
      gap:10px;
    }
    @media(min-width:768px){
      .grid-3{grid-template-columns:repeat(3,1fr);}
    }

    label{
      display:flex;
      flex-direction:column;
      gap:6px;
      color:var(--text);
      font-weight:600;
      font-size:.88rem;
    }

    .input, textarea, select{
      width:100%;
      padding:10px 12px;
      border-radius:10px;
      border:2px solid #bbf7d0;
      background:#fefdf9;
      font-family:'Tajawal',sans-serif;
      font-size:.95rem;
      transition:all .25s;
      color:var(--text);
    }
    .input:focus, textarea:focus, select:focus{
      outline:none;
      border-color:var(--primary);
      box-shadow:0 0 0 3px rgba(16,185,129,.18);
      background:#fff;
    }
    textarea{
      min-height:90px;
      resize:vertical;
    }

    .chipset{
      display:flex;
      flex-wrap:wrap;
      gap:8px;
      margin-top:6px;
    }
    .chip{
      display:flex;
      align-items:center;
      gap:6px;
      background:linear-gradient(135deg,#ecfdf5,#dcfce7);
      padding:7px 10px;
      border-radius:999px;
      border:1px solid #bbf7d0;
      font-size:.85rem;
      cursor:pointer;
      transition:all .2s;
    }
    .chip:hover{
      transform:translateY(-1px);
      box-shadow:0 4px 10px rgba(16,185,129,.25);
    }
    .chip input{
      width:16px;
      height:16px;
      accent-color:var(--primary);
      cursor:pointer;
    }

    .actions{
      display:flex;
      flex-direction:column;
      gap:8px;
      margin-top:6px;
    }
    @media(min-width:768px){
      .actions{flex-direction:row;}
    }

    .btn{
      border:none;
      border-radius:14px;
      padding:10px 16px;
      font-weight:800;
      font-size:.9rem;
      cursor:pointer;
      background:linear-gradient(135deg,var(--primary),var(--secondary));
      color:#fff;
      box-shadow:0 4px 15px rgba(16,185,129,.4);
      transition:all .2s;
      width:100%;
      text-align:center;
    }
    .btn:hover{
      transform:translateY(-1px);
      box-shadow:0 6px 18px rgba(16,185,129,.5);
    }
    .btn:active{transform:scale(.98);}
    .btn.danger{
      background:linear-gradient(135deg,#ef4444,#b91c1c);
      box-shadow:0 4px 15px rgba(185,28,28,.4);
    }

    /* Ø§Ù„ØªØ§Ø±ÙŠØ® Ø§Ù„Ù‡Ø¬Ø±ÙŠ */
    .date-with-hijri{position:relative;}
    .date-input-container{position:relative;display:flex;align-items:center;}
    .date-input-container .input{padding-right:45px;cursor:pointer;}
    .hijri-toggle{
      position:absolute;
      left:8px;
      top:50%;
      transform:translateY(-50%);
      background:transparent;
      border:none;
      cursor:pointer;
      width:28px;
      height:28px;
      border-radius:999px;
      display:flex;
      align-items:center;
      justify-content:center;
      transition:all .2s;
    }
    .hijri-toggle:hover{
      background:rgba(16,185,129,.12);
    }
    .hijri-icon{
      width:18px;
      height:18px;
      fill:var(--dark);
    }

    .hijri-calendar{
      position:fixed;
      background:#fff;
      border-radius:14px;
      box-shadow:0 10px 30px rgba(15,118,110,.2);
      padding:12px;
      z-index:1500;
      width:90vw;
      max-width:320px;
      display:none;
      top:50%;
      left:50%;
      transform:translate(-50%,-50%);
      border:2px solid #bbf7d0;
    }
    .hijri-calendar.active{
      display:block;
      animation:fadeIn .25s ease;
    }
    .hijri-header{
      display:flex;
      justify-content:space-between;
      align-items:center;
      margin-bottom:8px;
      padding-bottom:6px;
      border-bottom:1px solid #e5e7eb;
    }
    .hijri-month-year{
      font-weight:700;
      color:var(--dark);
      font-size:.95rem;
    }
    .hijri-nav{
      display:flex;
      gap:4px;
    }
    .hijri-nav button{
      background:#ecfdf5;
      border:none;
      border-radius:6px;
      padding:3px 8px;
      cursor:pointer;
      font-size:.75rem;
      font-weight:700;
      color:var(--dark);
      transition:all .2s;
    }
    .hijri-nav button:hover{
      background:var(--primary);
      color:#fff;
    }
    .hijri-weekdays{
      display:grid;
      grid-template-columns:repeat(7,1fr);
      text-align:center;
      font-weight:700;
      color:var(--dark);
      font-size:.75rem;
      margin-bottom:4px;
    }
    .hijri-days{
      display:grid;
      grid-template-columns:repeat(7,1fr);
      gap:4px;
    }
    .hijri-day{
      padding:6px 2px;
      text-align:center;
      border-radius:6px;
      cursor:pointer;
      font-size:.78rem;
      color:var(--text);
      transition:all .2s;
    }
    .hijri-day:hover{background:#ecfdf5;}
    .hijri-day.selected{
      background:var(--primary);
      color:#fff;
    }
    .today-btn{
      margin-top:8px;
      width:100%;
      padding:7px 10px;
      border:none;
      border-radius:8px;
      cursor:pointer;
      font-weight:700;
      font-size:.8rem;
      background:#ecfdf5;
      color:var(--dark);
      transition:all .2s;
    }
    .today-btn:hover{
      background:var(--primary);
      color:#fff;
    }

    /* Ø¬Ø¯ÙˆÙ„ Ø§Ù„Ø­ØµØµ */
    .wait-subtitle{
      margin-top:20px;
      margin-bottom:8px;
      font-size:1.05rem;
      color:var(--dark);
      font-weight:800;
      border-right:4px solid var(--accent);
      padding-right:8px;
    }

    .table-wrap{
      margin-top:8px;
      border-radius:12px;
      overflow:hidden;
      box-shadow:0 6px 18px rgba(15,118,110,.12);
      overflow-x:auto;
      background:#fff;
    }
    table{
      width:100%;
      border-collapse:collapse;
      min-width:750px;
      font-size:.8rem;
    }
    th,td{
      padding:8px 6px;
      border-bottom:1px solid #e5e7eb;
      text-align:center;
    }
    th{
      background:linear-gradient(135deg,var(--primary),var(--secondary));
      color:#fff;
      font-weight:800;
      font-size:.78rem;
      white-space:nowrap;
    }
    tbody tr:nth-child(even){background:#f9fafb;}
    tbody tr:hover{background:#ecfdf5;}
    td.text-right{text-align:right;}

    /* ØªÙˆØ³Øª */
    .toast{
      position:fixed;
      top:90px;
      left:50%;
      transform:translateX(-50%);
      background:linear-gradient(135deg,var(--primary),var(--secondary));
      color:#fff;
      padding:9px 14px;
      border-radius:999px;
      font-size:.85rem;
      font-weight:700;
      box-shadow:0 8px 20px rgba(15,118,110,.4);
      z-index:2000;
      animation:fadeIn .25s ease;
      max-width:90%;
      text-align:center;
    }
    .toast.err{
      background:linear-gradient(135deg,#ef4444,#b91c1c);
    }
    .toast.warn{
      background:linear-gradient(135deg,#facc15,#eab308);
      color:#111827;
    }

    @keyframes fadeIn{
      from{opacity:0;transform:translate(-50%, -10px);}
      to{opacity:1;transform:translate(-50%, 0);}
    }

    /* Ø§Ù„ÙÙˆØªØ± */
    .site-footer {
      background: linear-gradient(135deg, var(--primary), var(--dark));
      color: #fff;
      padding: 15px;
      text-align: center;
      box-shadow: 0 -4px 20px rgba(0,0,0,.15);
      margin-top: 30px;
    }
    
    .site-footer p {
      margin: 5px 0;
      font-size: 14px;
    }

    /* Ø²Ø± Ø§Ù„Ø¹ÙˆØ¯Ø© */
    #back-btn {
      position: fixed;
      top: 20px;
      right: 20px;
      z-index: 1000;
      background: var(--primary);
      color: white;
      border: none;
      padding: 10px 15px;
      border-radius: 5px;
      cursor: pointer;
      font-family: 'Tajawal', sans-serif;
      box-shadow: 0 2px 10px rgba(0,0,0,0.2);
      display: none;
    }

    @media (max-width: 768px) {
      .cards-container {
        grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
      }
      
      .header-text h1 {
        font-size: 1.5rem;
      }

      .card-page{padding:18px;}
    }
    
    @media (max-width: 480px) {
      .cards-container {
        grid-template-columns: 1fr;
      }
      
      .header-text h1 {
        font-size: 1.3rem;
      }
    }
  </style>
</head>
<body>

<header class="header-logo">
  <div class="wrap">
    <!-- Ø­Ø°Ù Ø§Ø³Ù… Ø§Ù„Ù…Ø¯Ø±Ø³Ø© Ù…Ù† Ø§Ù„Ù€ alt -->
    <img src="https://raw.githubusercontent.com/omymh/school26/main/26.png" alt="Ø´Ø¹Ø§Ø± Ø§Ù„Ù†Ø¸Ø§Ù…">
    <div class="header-text">
      <h1>Ù†Ø¸Ø§Ù… Ø§Ù„ØªÙ‚Ø§Ø±ÙŠØ± Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠØ©</h1>
      <p>Ù…Ù†ØµØ© Ù…ØªÙƒØ§Ù…Ù„Ø© Ù„Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„ØªÙ‚Ø§Ø±ÙŠØ± Ø§Ù„Ù…Ø¯Ø±Ø³ÙŠØ©</p>
    </div>
    <div class="quran-verse">ï´¿ ÙˆÙÙ‚ÙÙ„Ù’ Ø±ÙØ¨ÙÙ‘ Ø²ÙØ¯Ù’Ù†ÙÙŠ Ø¹ÙÙ„Ù’Ù…Ù‹Ø§ ï´¾</div>
  </div>
</header>

<nav>
  <div class="nav-container">
    <div class="nav-title">ØªÙ‚Ø§Ø±ÙŠØ± Ø§Ù„Ù…Ø¯Ø±Ø³Ø© Ø§Ù„Ø´Ø§Ù…Ù„Ø©</div>
    <div class="cards-container">
      <!-- Ø§Ù„ØªÙ‚Ø§Ø±ÙŠØ± Ø§Ù„Ø£Ø³Ø§Ø³ÙŠØ© -->
      <div class="card reports" onclick="loadInIframe('https://defullah2010-svg.github.io/R1397/', 'Ø§Ù„ØªÙ‚Ø§Ø±ÙŠØ±')">
        <div class="icon">ğŸ—“ï¸</div>
        <div class="title">Ø§Ù„ØªÙ‚Ø§Ø±ÙŠØ±</div>
        <div class="subtitle">
          <span>Ø§Ù„ÙŠÙˆÙ…ÙŠ</span>
          <span>Ø§Ù„Ø£Ø³Ø¨ÙˆØ¹ÙŠ</span>
          <span>Ø§Ù„Ø´Ù‡Ø±ÙŠ</span>
        </div>
      </div>

      <div class="card activities" onclick="loadInIframe('https://defullah2010-svg.github.io/A1397/', 'Ø§Ù„Ù†Ø´Ø§Ø· Ø§Ù„Ø·Ù„Ø§Ø¨ÙŠ')">
        <div class="icon">ğŸŒŸ</div>
        <div class="title">Ø§Ù„Ù†Ø´Ø§Ø· Ø§Ù„Ø·Ù„Ø§Ø¨ÙŠ</div>
      </div>

      <div class="card activities" onclick="loadInIframe('https://defullah2010-svg.github.io/AC1397/', 'Ø§Ù„Ø£Ù†Ø´Ø·Ø© Ø§Ù„Ù„Ø§ØµÙÙŠØ©')">
        <div class="icon">ğŸ§©</div>
        <div class="title">Ø§Ù„Ø£Ù†Ø´Ø·Ø© Ø§Ù„Ù„Ø§ØµÙÙŠØ©</div>
      </div>

      <div class="card" onclick="loadInIframe('https://defullah2010-svg.github.io/Trace1397/', 'Ù…ØªØ§Ø¨Ø¹Ø© Ø§Ù„Ø£Ù†Ø´Ø·Ø©')">
        <div class="icon">ğŸ“‹</div>
        <div class="title">Ù…ØªØ§Ø¨Ø¹Ø© Ø§Ù„Ø£Ù†Ø´Ø·Ø©</div>
      </div>

      <div class="card" onclick="loadInIframe('https://defullah2010-svg.github.io/L1397/', 'Ø§Ù„ØªÙˆØ§ØµÙ„ Ù…Ø¹ Ø£ÙˆÙ„ÙŠØ§Ø¡ Ø§Ù„Ø£Ù…ÙˆØ±')">
        <div class="icon">ğŸ“</div>
        <div class="title">Ø§Ù„ØªÙˆØ§ØµÙ„ Ù…Ø¹ Ø£ÙˆÙ„ÙŠØ§Ø¡ Ø§Ù„Ø£Ù…ÙˆØ±</div>
      </div>

      <div class="card" onclick="loadInIframe('https://defullah2010-svg.github.io/T1397/', 'Ø§Ù„ØªÙˆØ¬ÙŠÙ‡ Ø§Ù„Ø·Ù„Ø§Ø¨ÙŠ')">
        <div class="icon">ğŸ“</div>
        <div class="title">Ø§Ù„ØªÙˆØ¬ÙŠÙ‡ Ø§Ù„Ø·Ù„Ø§Ø¨ÙŠ</div>
      </div>

      <div class="card" onclick="loadInIframe('https://defullah2010-svg.github.io/V1397/', 'ØªØ¨Ø§Ø¯Ù„ Ø§Ù„Ø²ÙŠØ§Ø±Ø§Øª')">
        <div class="icon">ğŸ“</div>
        <div class="title">ØªØ¨Ø§Ø¯Ù„ Ø§Ù„Ø²ÙŠØ§Ø±Ø§Øª</div>
      </div>

      <div class="card" onclick="loadInIframe('https://defullah2010-svg.github.io/P1397/', 'Ø®Ø±ÙŠØ·Ø© Ù†ÙˆØ§ØªØ¬ Ø§Ù„ØªØ¹Ù„Ù‘Ù…')">
        <div class="icon">ğŸ—ºï¸</div>
        <div class="title">Ø®Ø±ÙŠØ·Ø© Ù†ÙˆØ§ØªØ¬ Ø§Ù„ØªØ¹Ù„Ù‘Ù…</div>
      </div>

      <!-- Ù‡Ù†Ø§ ØµØ§Ø± ÙŠÙØªØ­ Ø§Ù„Ù†Ù…ÙˆØ°Ø¬ Ø§Ù„Ø¯Ø§Ø®Ù„ÙŠ Ø¨Ø¯Ù„ Ø±Ø§Ø¨Ø· Ø®Ø§Ø±Ø¬ÙŠ -->
      <div class="card" onclick="loadInIframe('local:wait', 'Ø­ØµØ© Ø§Ù„Ø§Ù†ØªØ¸Ø§Ø±')">
        <div class="icon">ğŸ•’</div>
        <div class="title">Ø­ØµØ© Ø§Ù„Ø§Ù†ØªØ¸Ø§Ø±</div>
      </div>

      <div class="card featured" onclick="loadInIframe('https://defullah2010-svg.github.io/PLC1397/', 'Ù…Ø¬ØªÙ…Ø¹Ø§Øª Ø§Ù„ØªØ¹Ù„Ù‘Ù… Ø§Ù„Ù…Ù‡Ù†ÙŠØ©')">
        <div class="icon">ğŸ“‘</div>
        <div class="title">Ù…Ø¬ØªÙ…Ø¹Ø§Øª Ø§Ù„ØªØ¹Ù„Ù‘Ù… Ø§Ù„Ù…Ù‡Ù†ÙŠØ©</div>
      </div>

      <div class="card" onclick="loadInIframe('https://defullah2010-svg.github.io/D1397/', 'Ø§Ù„ØªÙˆØ¬ÙŠÙ‡ Ø§Ù„ØµØ­Ù‘ÙŠ')">
        <div class="icon">âš•ï¸</div>
        <div class="title">Ø§Ù„ØªÙˆØ¬ÙŠÙ‡ Ø§Ù„ØµØ­Ù‘ÙŠ</div>
      </div>

      <div class="card" onclick="loadInIframe('https://defullah2010-svg.github.io/S1397/', 'Ø§Ù„ØªØ¹Ù„Ù‘Ù… Ø§Ù„Ù†Ø´Ø·')">
        <div class="icon">â™Ÿ</div>
        <div class="title">Ø§Ù„ØªØ¹Ù„Ù‘Ù… Ø§Ù„Ù†Ø´Ø·</div>
      </div>

      <div class="card" onclick="loadInIframe('https://defullah2010-svg.github.io/LessonA1397/', 'Ø§Ù„Ø¯Ø±Ø³ Ø§Ù„ØªØ·Ø¨ÙŠÙ‚ÙŠ')">
        <div class="icon">ğŸ“š</div>
        <div class="title">Ø§Ù„Ø¯Ø±Ø³ Ø§Ù„ØªØ·Ø¨ÙŠÙ‚ÙŠ</div>
      </div>

      <div class="card" onclick="loadInIframe('https://defullah2010-svg.github.io/Warshah1397/', 'ÙˆØ±Ø´ Ø§Ù„Ø¹Ù…Ù„')">
        <div class="icon">ğŸ› ï¸</div>
        <div class="title">ÙˆØ±Ø´ Ø§Ù„Ø¹Ù…Ù„</div>
      </div>

      <div class="card" onclick="loadInIframe('https://defullah2010-svg.github.io/M1397/', 'Ø§Ù„Ù…Ø¨Ø§Ø¯Ø±Ø§Øª Ø§Ù„Ù†ÙˆØ¹ÙŠØ©')">
        <div class="icon">ğŸ’</div>
        <div class="title">Ø§Ù„Ù…Ø¨Ø§Ø¯Ø±Ø§Øª Ø§Ù„Ù†ÙˆØ¹ÙŠØ©</div>
      </div>

      <div class="card featured" onclick="loadInIframe('https://defullah2010-svg.github.io/Tecno1397/', 'Ø§Ù„Ø¨Ø±Ø§Ù…Ø¬ Ø§Ù„ØªÙ‚Ù†ÙŠØ©')">
        <div class="icon">ğŸ–¥ï¸</div>
        <div class="title">Ø§Ù„Ø¨Ø±Ø§Ù…Ø¬ Ø§Ù„ØªÙ‚Ù†ÙŠØ©</div>
      </div>

      <div class="card featured" onclick="loadInIframe('https://defullah2010-svg.github.io/Electronic1397/', 'Ø§Ù„ØªØ¹Ù„ÙŠÙ… Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ')">
        <div class="icon">ğŸ’»</div>
        <div class="title">Ø§Ù„ØªØ¹Ù„ÙŠÙ… Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ</div>
      </div>

      <div class="card" onclick="loadInIframe('https://defullah2010-svg.github.io/Doctor1397/', 'Ø§Ù„Ø®Ø·Ø· Ø§Ù„Ø¥Ø«Ø±Ø§Ø¦ÙŠØ© ÙˆØ§Ù„Ø¹Ù„Ø§Ø¬ÙŠØ©')">
        <div class="icon">ğŸ’¡</div>
        <div class="title">Ø§Ù„Ø®Ø·Ø· Ø§Ù„Ø¥Ø«Ø±Ø§Ø¦ÙŠØ© ÙˆØ§Ù„Ø¹Ù„Ø§Ø¬ÙŠØ©</div>
      </div>

      <div class="card" onclick="loadInIframe('https://defullah2010-svg.github.io/Search1397/', 'Ø§Ù„Ø¨Ø­Ø« Ø§Ù„Ø¥Ø¬Ø±Ø§Ø¦ÙŠ')">
        <div class="icon">ğŸ”</div>
        <div class="title">Ø§Ù„Ø¨Ø­Ø« Ø§Ù„Ø¥Ø¬Ø±Ø§Ø¦ÙŠ</div>
      </div>

      <div class="card" onclick="loadInIframe('https://defullah2010-svg.github.io/Searsh1397/', 'Ø¨Ø­Ø« Ø§Ù„Ø¯Ù‘Ø±Ø³')">
        <div class="icon">ğŸ“–</div>
        <div class="title">Ø¨Ø­Ø« Ø§Ù„Ø¯Ù‘Ø±Ø³</div>
      </div>

      <div class="card" onclick="loadInIframe('https://defullah2010-svg.github.io/Small1397/', 'Ø§Ù„Ø¯Ø±Ø³ Ø§Ù„Ù…ØµØºÙ‘Ø±')">
        <div class="icon">ğŸ”¬</div>
        <div class="title">Ø§Ù„Ø¯Ø±Ø³ Ø§Ù„Ù…ØµØºÙ‘Ø±</div>
      </div>

      <div class="card" onclick="loadInIframe('https://defullah2010-svg.github.io/Group1397/', 'Ø§Ù„Ø´Ø±Ø§ÙƒØ© Ø§Ù„Ù…Ø¬ØªÙ…Ø¹ÙŠØ©')">
        <div class="icon">ğŸ¤</div>
        <div class="title">Ø§Ù„Ø´Ø±Ø§ÙƒØ© Ø§Ù„Ù…Ø¬ØªÙ…Ø¹ÙŠØ©</div>
      </div>

      <div class="card" onclick="loadInIframe('https://defullah2010-svg.github.io/VM1397/', 'Ø§Ù„Ø²ÙŠØ§Ø±Ø§Øª Ø§Ù„ØªÙ‚ÙŠÙŠÙ…ÙŠØ©')">
        <div class="icon">ğŸ…</div>
        <div class="title">Ø§Ù„Ø²ÙŠØ§Ø±Ø§Øª Ø§Ù„ØªÙ‚ÙŠÙŠÙ…ÙŠØ©</div>
      </div>

      <div class="card" onclick="loadInIframe('https://defullah2010-svg.github.io/TM1397/', 'ØªÙ‚ÙŠÙŠÙ… Ø§Ù„Ø£Ø¯Ø§Ø¡ Ø§Ù„ØªØ¹Ù„ÙŠÙ…ÙŠ')">
        <div class="icon">ğŸ’¯</div>
        <div class="title">ØªÙ‚ÙŠÙŠÙ… Ø§Ù„Ø£Ø¯Ø§Ø¡ Ø§Ù„ØªØ¹Ù„ÙŠÙ…ÙŠ</div>
      </div>
    </div>
  </div>
</nav>

<!-- Ø§Ù„Ù…Ø­ØªÙˆÙ‰ Ø§Ù„Ù…Ø­Ù„ÙŠ: ØªÙ‚Ø±ÙŠØ± Ø­ØµØµ Ø§Ù„Ø§Ù†ØªØ¸Ø§Ø± -->
<main id="local-pages">
  <section id="wait-section" class="card-page">
    <h2 class="wait-title">ØªÙ‚Ø±ÙŠØ± Ø­ØµØ© Ø§Ù„Ø§Ù†ØªØ¸Ø§Ø±</h2>
    <p class="wait-intro">
      Ø³Ø¬Ù„ÙŠ Ø¨ÙŠØ§Ù†Ø§Øª Ø­ØµØ© Ø§Ù„Ø§Ù†ØªØ¸Ø§Ø±ØŒ ÙˆÙ…Ø§ ØªÙ… ØªÙ†ÙÙŠØ°Ù‡ Ù…Ø¹ Ø§Ù„Ø·Ø§Ù„Ø¨Ø§ØªØŒ ÙˆØ³ÙŠØªÙ… Ø­ÙØ¸ Ø§Ù„Ø­ØµØµ ÙÙŠ Ù†ÙØ³ Ø§Ù„Ø¬Ù‡Ø§Ø² Ù…Ø¹ Ø¥Ù…ÙƒØ§Ù†ÙŠØ© ØªØµØ¯ÙŠØ± ØªÙ‚Ø±ÙŠØ± PDF Ø´Ø§Ù…Ù„.
    </p>

    <form id="sesForm" class="form">
      <label>Ø§Ø³Ù… Ø§Ù„Ù…Ø¹Ù„Ù…Ø© (Ø§Ø®ØªÙŠØ§Ø±ÙŠ)
        <input class="input" id="reportTeacher" placeholder="Ù…Ø«Ø§Ù„: Ø£/ Ù†ÙˆØ±Ø© Ø§Ù„Ø­Ø±Ø¨ÙŠ">
      </label>

      <div class="grid-3">
        <label>Ø§Ù„Ø£Ø³Ø¨ÙˆØ¹ *
          <select class="input" id="weekNumber" required>
            <option value="">Ø§Ø®ØªØ± Ø§Ù„Ø£Ø³Ø¨ÙˆØ¹</option>
            <option>Ø§Ù„Ø£Ø³Ø¨ÙˆØ¹ Ø§Ù„Ø£ÙˆÙ„</option>
            <option>Ø§Ù„Ø£Ø³Ø¨ÙˆØ¹ Ø§Ù„Ø«Ø§Ù†ÙŠ</option>
            <option>Ø§Ù„Ø£Ø³Ø¨ÙˆØ¹ Ø§Ù„Ø«Ø§Ù„Ø«</option>
            <option>Ø§Ù„Ø£Ø³Ø¨ÙˆØ¹ Ø§Ù„Ø±Ø§Ø¨Ø¹</option>
            <option>Ø§Ù„Ø£Ø³Ø¨ÙˆØ¹ Ø§Ù„Ø®Ø§Ù…Ø³</option>
            <option>Ø§Ù„Ø£Ø³Ø¨ÙˆØ¹ Ø§Ù„Ø³Ø§Ø¯Ø³</option>
            <option>Ø§Ù„Ø£Ø³Ø¨ÙˆØ¹ Ø§Ù„Ø³Ø§Ø¨Ø¹</option>
            <option>Ø§Ù„Ø£Ø³Ø¨ÙˆØ¹ Ø§Ù„Ø«Ø§Ù…Ù†</option>
            <option>Ø§Ù„Ø£Ø³Ø¨ÙˆØ¹ Ø§Ù„ØªØ§Ø³Ø¹</option>
            <option>Ø§Ù„Ø£Ø³Ø¨ÙˆØ¹ Ø§Ù„Ø¹Ø§Ø´Ø±</option>
            <option>Ø§Ù„Ø£Ø³Ø¨ÙˆØ¹ Ø§Ù„Ø­Ø§Ø¯ÙŠ Ø¹Ø´Ø±</option>
            <option>Ø§Ù„Ø£Ø³Ø¨ÙˆØ¹ Ø§Ù„Ø«Ø§Ù†ÙŠ Ø¹Ø´Ø±</option>
            <option>Ø§Ù„Ø£Ø³Ø¨ÙˆØ¹ Ø§Ù„Ø«Ø§Ù„Ø« Ø¹Ø´Ø±</option>
          </select>
        </label>

        <label>Ø§Ù„ÙŠÙˆÙ… *
          <select class="input" id="dayName" required>
            <option value="">Ø§Ø®ØªØ± Ø§Ù„ÙŠÙˆÙ…</option>
            <option>Ø§Ù„Ø£Ø­Ø¯</option>
            <option>Ø§Ù„Ø§Ø«Ù†ÙŠÙ†</option>
            <option>Ø§Ù„Ø«Ù„Ø§Ø«Ø§Ø¡</option>
            <option>Ø§Ù„Ø£Ø±Ø¨Ø¹Ø§Ø¡</option>
            <option>Ø§Ù„Ø®Ù…ÙŠØ³</option>
          </select>
        </label>

        <label class="date-with-hijri">Ø§Ù„ØªØ§Ø±ÙŠØ® (Ù‡Ø¬Ø±ÙŠ) *
          <div class="date-input-container">
            <input class="input hijri-date-input" id="sessionDate" required placeholder="Ø§Ø®ØªØ± Ø§Ù„ØªØ§Ø±ÙŠØ® Ø§Ù„Ù‡Ø¬Ø±ÙŠ" readonly>
            <button type="button" class="hijri-toggle">
              <svg class="hijri-icon" viewBox="0 0 24 24">
                <path d="M19 3h-1V1h-2v2H8V1H6v2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm0 16H5V9h14v10zM5 7V5h14v2H5zm2 4h10v2H7v-2zm0 4h7v2H7v-2z"/>
              </svg>
            </button>
          </div>
          <div class="hijri-calendar">
            <div class="hijri-header">
              <div class="hijri-month-year"></div>
              <div class="hijri-nav">
                <button type="button" class="prev-year">Â«</button>
                <button type="button" class="prev-month">â€¹</button>
                <button type="button" class="next-month">â€º</button>
                <button type="button" class="next-year">Â»</button>
              </div>
            </div>
            <div class="hijri-weekdays">
              <span>Ø­</span><span>Ù†</span><span>Ø«</span><span>Ø±</span><span>Ø®</span><span>Ø¬</span><span>Ø³</span>
            </div>
            <div class="hijri-days"></div>
            <button type="button" class="today-btn">Ø§Ø®ØªØ± Ø§Ù„ÙŠÙˆÙ…</button>
          </div>
        </label>

        <label>Ø§Ù„ØµÙ / Ø§Ù„ÙØµÙ„ *
          <input class="input" id="className" required placeholder="Ù…Ø«Ø§Ù„: 2 / Ø£">
        </label>

        <label>Ø±Ù‚Ù… Ø§Ù„Ø­ØµØ© *
          <input class="input" id="sessionNumber" required placeholder="Ù…Ø«Ø§Ù„: 3">
        </label>

        <label>Ø§Ù„Ù…Ø¹Ù„Ù…Ø© Ø§Ù„ØºØ§Ø¦Ø¨Ø© *
          <input class="input" id="absentTeacher" required placeholder="Ù…Ø«Ø§Ù„: Ø£/ Ø³Ø§Ø±Ø© Ù…Ø­Ù…Ø¯">
        </label>
      </div>

      <label>Ù…Ø§ ØªÙ… ØªÙ†ÙÙŠØ°Ù‡ Ù…Ø¹ Ø§Ù„Ø·Ø§Ù„Ø¨Ø§Øª *
        <textarea class="input" id="activitiesText" required placeholder="Ø§ÙƒØªØ¨ÙŠ Ø¨Ø¥ÙŠØ¬Ø§Ø² Ù…Ø§ ØªÙ… Ø¹Ù…Ù„Ù‡ ÙÙŠ Ø­ØµØ© Ø§Ù„Ø§Ù†ØªØ¸Ø§Ø±..."></textarea>
      </label>

      <label>Ø§Ù„Ù…Ø¬Ø§Ù„ / Ù†ÙˆØ¹ Ø§Ù„Ù†Ø´Ø§Ø· *
        <div class="chipset">
          <label class="chip">
            <input type="checkbox" id="basicSkills">
            <span>Ø§Ù„Ù…Ù‡Ø§Ø±Ø§Øª Ø§Ù„Ø£Ø³Ø§Ø³ÙŠØ©</span>
          </label>
          <label class="chip">
            <input type="checkbox" id="values">
            <span>Ø§Ù„Ù‚ÙŠÙ… ÙˆØ§Ù„Ù…ÙˆØ§Ø·Ù†Ø© Ø§Ù„ØµØ§Ù„Ø­Ø©</span>
          </label>
          <label class="chip">
            <input type="checkbox" id="futureSkills">
            <span>Ù…Ù‡Ø§Ø±Ø§Øª Ø§Ù„Ù…Ø³ØªÙ‚Ø¨Ù„</span>
          </label>
        </div>
      </label>

      <div class="actions">
        <button class="btn" type="button" id="saveSession">Ø­ÙØ¸ Ø§Ù„Ø­ØµØ©</button>
        <button class="btn" type="button" id="exportSessions">ØªØµØ¯ÙŠØ± Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø­ØµØµ PDF</button>
        <button class="btn danger" type="button" id="clearAll">Ù…Ø³Ø­ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø­ØµØµ</button>
      </div>
    </form>

    <h3 class="wait-subtitle">Ø§Ù„Ø­ØµØµ Ø§Ù„Ù…Ø³Ø¬Ù„Ø©</h3>
    <div class="table-wrap">
      <table>
        <thead>
          <tr>
            <th style="width:40px">Ù…</th>
            <th style="width:80px">Ø§Ù„Ø£Ø³Ø¨ÙˆØ¹</th>
            <th style="width:80px">Ø§Ù„ÙŠÙˆÙ…</th>
            <th style="width:100px">Ø§Ù„ØªØ§Ø±ÙŠØ®</th>
            <th>Ø§Ù„ØµÙ</th>
            <th style="width:60px">Ø§Ù„Ø­ØµØ©</th>
            <th style="width:140px">Ø§Ù„Ù…Ø¹Ù„Ù…Ø© Ø§Ù„ØºØ§Ø¦Ø¨Ø©</th>
            <th style="min-width:220px">Ù…Ø§ ØªÙ… ØªÙ†ÙÙŠØ°Ù‡</th>
            <th style="min-width:140px">Ø§Ù„Ù…Ø¬Ø§Ù„</th>
            <th style="width:70px">Ø¥Ø¬Ø±Ø§Ø¡</th>
          </tr>
        </thead>
        <tbody id="sessionsBody"></tbody>
      </table>
    </div>
  </section>
</main>

<div id="iframe-container">
  <iframe id="content-frame" src="about:blank"></iframe>
</div>

<footer class="site-footer">
  <p><strong>Ù…Ø¯ÙŠØ±Ø© Ø§Ù„Ù…Ø¯Ø±Ø³Ø©:</strong> Ø£Ù…Ø§Ù†ÙŠ Ø¢Ù„ Ø¹Ø¨Ø´Ø§Ù†</p>
  <p><strong>ØªØµÙ…ÙŠÙ… Ø§Ù„Ù‡ÙŠØ¦Ø© Ø§Ù„Ø¥Ø¯Ø§Ø±ÙŠØ©:</strong> Ø¹ÙŠØ¯Ø© ØµÙ„Ø§Ø­ØŒ Ù…Ù†ÙŠØ±Ø© Ø§Ù„Ø¹Ù…Ø±Ø§Ù†ÙŠ</p>
</footer>

<button id="back-btn">â† Ø§Ù„Ø¹ÙˆØ¯Ø© Ù„Ù„Ø±Ø¦ÙŠØ³ÙŠØ©</button>

<!-- Ù…ÙƒØªØ¨Ø§Øª Ø§Ù„ØªØµØ¯ÙŠØ± Ù„Ù„Ù†Ù…ÙˆØ°Ø¬ Ø§Ù„Ù…Ø­Ù„ÙŠ -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>

<script>
  // Ø¹Ø¨Ø§Ø±Ø§Øª Ø§Ù„Ù…Ø¯Ø±Ø³Ø© ÙˆØ§Ù„Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„ØªÙŠ Ù†Ø±ÙŠØ¯ Ø­Ø°ÙÙ‡Ø§ Ù…Ù† ÙƒÙ„ Ø§Ù„ØªÙ‚Ø§Ø±ÙŠØ± Ø§Ù„Ø®Ø§Ø±Ø¬ÙŠØ©
  const SCHOOL_PHRASES = [
    'Ø§Ù„Ù…Ø¯Ø±Ø³Ø© Ø§Ù„Ø³Ø§Ø¯Ø³Ø© ÙˆØ§Ù„Ø¹Ø´Ø±ÙˆÙ†',
    'Ù…Ø¯Ø±Ø³Ø© Ø§Ù„Ø³Ø§Ø¯Ø³Ø© ÙˆØ§Ù„Ø¹Ø´Ø±ÙˆÙ†',
    'Ù…Ø¯Ø±Ø³Ø© 26',
    'Ø§Ù„Ø§Ø¨ØªØ¯Ø§Ø¦ÙŠØ© Ø§Ù„Ø³Ø§Ø¯Ø³Ø© ÙˆØ§Ù„Ø¹Ø´Ø±ÙˆÙ†'
  ];

  const ED_PHRASES = [
    'Ø§Ù„Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø¹Ø§Ù…Ø© Ù„Ù„ØªØ¹Ù„ÙŠÙ… Ø¨Ù…Ù†Ø·Ù‚Ø© ØªØ¨ÙˆÙƒ',
    'Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„ØªØ¹Ù„ÙŠÙ… Ø¨Ù…Ù†Ø·Ù‚Ø© ØªØ¨ÙˆÙƒ',
    'Ø¥Ø¯Ø§Ø±Ø© ØªØ¹Ù„ÙŠÙ… ØªØ¨ÙˆÙƒ',
    'ØªØ¹Ù„ÙŠÙ… ØªØ¨ÙˆÙƒ'
  ];

  function cleanReportDoc(doc){
    if (!doc) return;

    // 1) ØªØ¹Ø¯ÙŠÙ„ Ø¹Ù†ÙˆØ§Ù† Ø§Ù„ØªÙ‚Ø±ÙŠØ± Ù†ÙØ³Ù‡
    let newTitle = doc.title || '';
    [...SCHOOL_PHRASES, ...ED_PHRASES].forEach(p => {
      if (p && newTitle.includes(p)) {
        newTitle = newTitle.split(p).join('');
      }
    });
    doc.title = newTitle.trim();

    // 2) Ø¥Ø²Ø§Ù„Ø© Ø§Ù„Ù†ØµÙˆØµ Ù…Ù† ÙƒÙ„ Ø§Ù„Ø¹Ù‚Ø¯ Ø§Ù„Ù†ØµÙŠØ© Ø¯Ø§Ø®Ù„ body
    if (doc.body) {
      const walker = doc.createTreeWalker(doc.body, NodeFilter.SHOW_TEXT, null, false);
      let node;
      while ((node = walker.nextNode())) {
        let txt = node.nodeValue;
        let changed = false;
        [...SCHOOL_PHRASES, ...ED_PHRASES].forEach(p => {
          if (p && txt.includes(p)) {
            txt = txt.split(p).join('');
            changed = true;
          }
        });
        if (changed) {
          node.nodeValue = txt;
        }
      }
    }

    // 3) ØªÙØ±ÙŠØº alt/title Ù…Ù† Ø§Ù„Ø¹Ù†Ø§ØµØ± Ø§Ù„ØªÙŠ ØªØ­ØªÙˆÙŠ Ø§Ù„Ø§Ø³Ù…
    const allEls = doc.querySelectorAll('[alt],[title]');
    allEls.forEach(el => {
      [...SCHOOL_PHRASES, ...ED_PHRASES].forEach(p => {
        if (!p) return;
        if (el.alt && el.alt.includes(p)) el.alt = '';
        if (el.title && el.title.includes(p)) el.title = '';
      });
    });
  }

  function loadInIframe(url, title){
    const iframeContainer = document.getElementById('iframe-container');
    const iframe = document.getElementById('content-frame');
    const backBtn = document.getElementById('back-btn');
    const nav = document.querySelector('nav');
    const localPages = document.getElementById('local-pages');

    document.title = (title || 'ØªÙ‚Ø±ÙŠØ±') + ' - Ù†Ø¸Ø§Ù… Ø§Ù„ØªÙ‚Ø§Ø±ÙŠØ± Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠØ©';

    // Ø­Ø§Ù„Ø© Ø§Ù„Ù…Ø­ØªÙˆÙ‰ Ø§Ù„Ù…Ø­Ù„ÙŠ (Ø­ØµØ© Ø§Ù„Ø§Ù†ØªØ¸Ø§Ø±)
    if (url === 'local:wait') {
      if (iframe) iframe.src = 'about:blank';
      if (iframeContainer) iframeContainer.style.display = 'none';
      if (nav) nav.style.display = 'none';
      if (localPages) {
        localPages.style.display = 'block';
        localPages.scrollIntoView({behavior:'smooth'});
      }
      backBtn.style.display = 'block';

      backBtn.onclick = function() {
        if (localPages) localPages.style.display = 'none';
        if (nav) nav.style.display = 'block';
        if (iframeContainer) iframeContainer.style.display = 'none';
        document.title = 'Ù†Ø¸Ø§Ù… Ø§Ù„ØªÙ‚Ø§Ø±ÙŠØ± Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠØ©';
        backBtn.style.display = 'none';
      };

      return;
    }

    // Ø§Ù„ØªÙ‚Ø§Ø±ÙŠØ± Ø§Ù„Ø®Ø§Ø±Ø¬ÙŠØ© (Ø¯Ø§Ø®Ù„ iframe)
    if (localPages) localPages.style.display = 'none';

    iframe.src = url;
    iframeContainer.style.display = 'block';
    iframeContainer.scrollIntoView({behavior: 'smooth'});
    if (nav) nav.style.display = 'none';
    backBtn.style.display = 'block';
    
    iframe.onload = function() {
      console.log('ØªÙ… ØªØ­Ù…ÙŠÙ„ Ø§Ù„ØªÙ‚Ø±ÙŠØ±:', url);
      try {
        const iframeDoc = iframe.contentDocument || iframe.contentWindow.document;
        cleanReportDoc(iframeDoc);

        const tables = iframeDoc.querySelectorAll('table');
        tables.forEach((table, index) => {
          const rows = table.querySelectorAll('tr');
          if (rows.length <= 1) {
            console.warn(`Ø§Ù„Ø¬Ø¯ÙˆÙ„ ${index + 1} Ù‚Ø¯ ÙŠÙƒÙˆÙ† ÙØ§Ø±ØºÙ‹Ø§ Ø£Ùˆ Ø¨Ù‡ Ù…Ø´ÙƒÙ„Ø©`);
          } else {
            console.log(`Ø§Ù„Ø¬Ø¯ÙˆÙ„ ${index + 1} ÙŠØ­ØªÙˆÙŠ Ø¹Ù„Ù‰ ${rows.length} ØµÙÙˆÙ`);
          }
        });

      } catch (e) {
        console.log('Ù„Ø§ ÙŠÙ…ÙƒÙ† Ø§Ù„ÙˆØµÙˆÙ„ Ø¥Ù„Ù‰ Ù…Ø­ØªÙˆÙ‰ Ø§Ù„Ø¥Ø·Ø§Ø± Ø¨Ø³Ø¨Ø¨ Ø³ÙŠØ§Ø³Ø© CORS Ø£Ùˆ Ø§Ø®ØªÙ„Ø§Ù Ø§Ù„Ø¯ÙˆÙ…ÙŠÙ†');
      }
    };

    backBtn.onclick = function() {
      iframeContainer.style.display = 'none';
      if (nav) nav.style.display = 'block';
      document.title = 'Ù†Ø¸Ø§Ù… Ø§Ù„ØªÙ‚Ø§Ø±ÙŠØ± Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠØ©';
      backBtn.style.display = 'none';
      iframe.src = 'about:blank';
    };
  }

  // --------- Ù…Ù†Ø·Ù‚ ØªÙ‚Ø±ÙŠØ± Ø­ØµØ© Ø§Ù„Ø§Ù†ØªØ¸Ø§Ø± Ø§Ù„Ù…Ø­Ù„ÙŠ ---------
  let waitSessions = [];
  let currentHijriYear = 1447;
  let currentHijriMonth = 1;

  function showToast(message, type = ''){
    const t = document.createElement('div');
    t.className = 'toast' + (type ? ' ' + type : '');
    t.textContent = message;
    document.body.appendChild(t);
    setTimeout(()=>{ t.style.opacity='0'; t.style.transition='opacity .25s'; },1400);
    setTimeout(()=>{ t.remove(); },1900);
  }

  function waitLoadSessions(){
    try{
      const saved = localStorage.getItem('w26_waiting_sessions');
      if(saved){
        waitSessions = JSON.parse(saved) || [];
        renderWaitSessions();
      }
    }catch(e){
      console.log('Ù„Ø§ ØªÙˆØ¬Ø¯ Ø¨ÙŠØ§Ù†Ø§Øª Ø³Ø§Ø¨Ù‚Ø© Ù„Ø­ØµØµ Ø§Ù„Ø§Ù†ØªØ¸Ø§Ø±');
    }
  }

  function waitSaveSessionsToStorage(){
    try{
      localStorage.setItem('w26_waiting_sessions', JSON.stringify(waitSessions));
    }catch(e){
      console.error('Ø®Ø·Ø£ ÙÙŠ Ø§Ù„Ø­ÙØ¸', e);
    }
  }

  function renderWaitSessions(){
    const body = document.getElementById('sessionsBody');
    if(!body) return;
    body.innerHTML = '';
    waitSessions.forEach((s, i)=>{
      const tr = document.createElement('tr');
      tr.innerHTML = `
        <td>${i+1}</td>
        <td>${s.week || ''}</td>
        <td>${s.day}</td>
        <td>${s.date}</td>
        <td>${s.className}</td>
        <td>${s.number}</td>
        <td>${s.teacher}</td>
        <td class="text-right">${s.activities}</td>
        <td class="text-right">${s.fields}</td>
        <td>
          <button class="btn danger" data-index="${i}"
                  style="width:auto;padding:4px 8px;font-size:.75rem;border-radius:999px;box-shadow:none;">
            Ø­Ø°Ù
          </button>
        </td>
      `;
      body.appendChild(tr);
    });
    body.querySelectorAll('button[data-index]').forEach(btn=>{
      btn.addEventListener('click', function(e){
        e.preventDefault();
        const idx = parseInt(this.getAttribute('data-index'), 10);
        deleteWaitSession(idx);
      });
    });
  }

  function deleteWaitSession(index){
    if(!confirm('Ù‡Ù„ ØªØ±ÙŠØ¯ÙŠÙ† Ø­Ø°Ù Ù‡Ø°Ù‡ Ø§Ù„Ø­ØµØ©ØŸ')) return;
    waitSessions.splice(index,1);
    waitSaveSessionsToStorage();
    renderWaitSessions();
    showToast('ØªÙ… Ø­Ø°Ù Ø§Ù„Ø­ØµØ©');
  }

  function initializeWaitSessionManagement(){
    const saveBtn = document.getElementById('saveSession');
    const clearAllBtn = document.getElementById('clearAll');

    if (!saveBtn || !clearAllBtn) return;

    saveBtn.addEventListener('click', function(e){
      e.preventDefault();

      const week = document.getElementById('weekNumber').value;
      const day = document.getElementById('dayName').value;
      const date = document.getElementById('sessionDate').value;
      const className = document.getElementById('className').value.trim();
      const sessionNumber = document.getElementById('sessionNumber').value.trim();
      const absentTeacher = document.getElementById('absentTeacher').value.trim();
      const activitiesText = document.getElementById('activitiesText').value.trim();

      const fields = [];
      if(document.getElementById('basicSkills').checked) fields.push('Ø§Ù„Ù…Ù‡Ø§Ø±Ø§Øª Ø§Ù„Ø£Ø³Ø§Ø³ÙŠØ©');
      if(document.getElementById('values').checked) fields.push('Ø§Ù„Ù‚ÙŠÙ… ÙˆØ§Ù„Ù…ÙˆØ§Ø·Ù†Ø© Ø§Ù„ØµØ§Ù„Ø­Ø©');
      if(document.getElementById('futureSkills').checked) fields.push('Ù…Ù‡Ø§Ø±Ø§Øª Ø§Ù„Ù…Ø³ØªÙ‚Ø¨Ù„');

      if(!week || !day || !date || !className || !sessionNumber || !absentTeacher || !activitiesText || fields.length === 0){
        showToast('Ø£ÙƒÙ…Ù„ÙŠ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø­Ù‚ÙˆÙ„ ÙˆØ§Ø®ØªØ± Ù…Ø¬Ø§Ù„Ø§Ù‹ ÙˆØ§Ø­Ø¯Ø§Ù‹ Ø¹Ù„Ù‰ Ø§Ù„Ø£Ù‚Ù„', 'warn');
        return;
      }

      waitSessions.push({
        week,
        day,
        date,
        className,
        number:sessionNumber,
        teacher:absentTeacher,
        activities:activitiesText,
        fields:fields.join('ØŒ ')
      });

      waitSaveSessionsToStorage();
      renderWaitSessions();
      document.getElementById('sesForm').reset();
      showToast('ØªÙ… Ø­ÙØ¸ Ø§Ù„Ø­ØµØ©');
    });

    clearAllBtn.addEventListener('click', function(e){
      e.preventDefault();
      if(waitSessions.length === 0){
        showToast('Ù„Ø§ ØªÙˆØ¬Ø¯ Ø­ØµØµ Ù…Ø³Ø¬Ù„Ø©', 'warn');
        return;
      }
      if(!confirm('Ù…Ø³Ø­ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø­ØµØµ Ø§Ù„Ù…Ø³Ø¬Ù„Ø©ØŸ')) return;
      waitSessions = [];
      waitSaveSessionsToStorage();
      renderWaitSessions();
      showToast('ØªÙ… Ù…Ø³Ø­ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø­ØµØµ');
    });
  }

  async function captureAsCanvas(element){
    try{
      return await html2canvas(element, {
        scale:1.5,
        backgroundColor:'#ffffff',
        useCORS:true,
        imageTimeout:0,
        logging:false,
        allowTaint:false,
        removeContainer:true
      });
    }catch(err){
      element.querySelectorAll('img').forEach(img=>{
        const src = img.getAttribute('src') || '';
        if(!src.startsWith('data:')) img.style.display='none';
      });
      return await html2canvas(element, {
        scale:1.5,
        backgroundColor:'#ffffff',
        useCORS:true,
        imageTimeout:0,
        logging:false,
        allowTaint:false,
        removeContainer:true
      });
    }
  }

  function getJsPDF(){
    if(window.jspdf && window.jspdf.jsPDF) return window.jspdf.jsPDF;
    if(window.jsPDF) return window.jsPDF;
    throw new Error('jsPDF library not loaded');
  }

  function initializeWaitSessionsExport(){
    const btn = document.getElementById('exportSessions');
    if (!btn) return;

    btn.addEventListener('click', async function(e){
      e.preventDefault();
      if(waitSessions.length === 0){
        showToast('Ù„Ø§ ØªÙˆØ¬Ø¯ Ø­ØµØµ Ù…Ø³Ø¬Ù„Ø©', 'warn');
        return;
      }

      try{
        showToast('Ø¬Ø§Ø±ÙŠ ØªØ¬Ù‡ÙŠØ² Ù…Ù„Ù PDF...', 'warn');

        const print = document.createElement('div');
        print.style.cssText = `
          position:fixed;top:0;left:0;width:1123px;
          background:#ffffff;padding:30px;z-index:3000;
          box-shadow:0 0 20px rgba(0,0,0,.3);
          font-family:'Tajawal',sans-serif;direction:rtl;
          min-height:794px;display:flex;flex-direction:column;
          font-size:15px;
        `;

        let rows = '';
        waitSessions.forEach((s, i)=>{
          rows += `
            <tr>
              <td style="padding:6px;border:1px solid #bbf7d0;">${i+1}</td>
              <td style="padding:6px;border:1px solid #bbf7d0;">${s.week || ''}</td>
              <td style="padding:6px;border:1px solid #bbf7d0;">${s.day}</td>
              <td style="padding:6px;border:1px solid #bbf7d0;">${s.date}</td>
              <td style="padding:6px;border:1px solid #bbf7d0;">${s.className}</td>
              <td style="padding:6px;border:1px solid #bbf7d0;">${s.number}</td>
              <td style="padding:6px;border:1px solid #bbf7d0;">${s.teacher}</td>
              <td style="padding:6px;border:1px solid #bbf7d0;text-align:right;">${s.activities}</td>
              <td style="padding:6px;border:1px solid #bbf7d0;text-align:right;">${s.fields}</td>
            </tr>
          `;
        });

        print.innerHTML = `
          <div style="flex:1;">
            <div style="text-align:center;margin-bottom:14px;">
              <img src="https://raw.githubusercontent.com/omymh/school26/main/26.png"
                   crossorigin="anonymous"
                   style="width:100%;height:60px;object-fit:contain;margin-bottom:6px;">
              <h1 style="color:#047857;font-size:20px;margin:0;font-weight:900;
                         border-bottom:1px solid #bbf7d0;padding-bottom:6px;">
                ØªÙ‚Ø§Ø±ÙŠØ± Ø­ØµØµ Ø§Ù„Ø§Ù†ØªØ¸Ø§Ø±
              </h1>
            </div>

            <table style="width:100%;border-collapse:collapse;margin-bottom:14px;">
              <thead>
                <tr>
                  <th style="padding:6px;border:1px solid #bbf7d0;background:#16a34a;color:#fff;width:40px;">Ù…</th>
                  <th style="padding:6px;border:1px solid #bbf7d0;background:#16a34a;color:#fff;width:80px;">Ø§Ù„Ø£Ø³Ø¨ÙˆØ¹</th>
                  <th style="padding:6px;border:1px solid #bbf7d0;background:#16a34a;color:#fff;width:80px;">Ø§Ù„ÙŠÙˆÙ…</th>
                  <th style="padding:6px;border:1px solid #bbf7d0;background:#16a34a;color:#fff;width:100px;">Ø§Ù„ØªØ§Ø±ÙŠØ®</th>
                  <th style="padding:6px;border:1px solid #bbf7d0;background:#16a34a;color:#fff;">Ø§Ù„ØµÙ</th>
                  <th style="padding:6px;border:1px solid #bbf7d0;background:#16a34a;color:#fff;width:60px;">Ø§Ù„Ø­ØµØ©</th>
                  <th style="padding:6px;border:1px solid #bbf7d0;background:#16a34a;color:#fff;width:140px;">Ø§Ù„Ù…Ø¹Ù„Ù…Ø© Ø§Ù„ØºØ§Ø¦Ø¨Ø©</th>
                  <th style="padding:6px;border:1px solid #bbf7d0;background:#16a34a;color:#fff;min-width:200px;">Ù…Ø§ ØªÙ… ØªÙ†ÙÙŠØ°Ù‡</th>
                  <th style="padding:6px;border:1px solid #bbf7d0;background:#16a34a;color:#fff;min-width:140px;">Ø§Ù„Ù…Ø¬Ø§Ù„</th>
                </tr>
              </thead>
              <tbody>${rows}</tbody>
            </table>
          </div>

          <div style="margin-top:auto;padding-top:6px;border-top:1px solid #bbf7d0;">
            <div style="display:flex;justify-content:flex-start;direction:ltr;">
              <div style="text-align:left;">
                <p style="margin:0 0 3px;font-weight:bold;color:#047857;font-size:14px;">Ù…Ø¯ÙŠØ±Ø© Ø§Ù„Ù…Ø¯Ø±Ø³Ø©</p>
                <p style="margin:0;font-size:14px;color:#047857;">Ø£Ù…Ø§Ù†ÙŠ Ø¢Ù„ Ø¹Ø¨Ø´Ø§Ù†</p>
              </div>
            </div>
          </div>
        `;

        document.body.appendChild(print);
        const canvas = await captureAsCanvas(print);
        document.body.removeChild(print);

        const imgData = canvas.toDataURL('image/jpeg', 0.95);
        const JsPDF = getJsPDF();
        const pdf = new JsPDF({orientation:'landscape', unit:'mm', format:'a4'});
        const pageWidth = pdf.internal.pageSize.getWidth();
        const pageHeight = pdf.internal.pageSize.getHeight();
        const imgWidth = pageWidth;
        const imgHeight = (canvas.height * imgWidth) / canvas.width;

        let heightLeft = imgHeight;
        let position = 0;

        pdf.addImage(imgData, 'JPEG', 0, position, imgWidth, imgHeight);
        heightLeft -= pageHeight;

        while(heightLeft > 0){
          position = heightLeft - imgHeight;
          pdf.addPage();
          pdf.addImage(imgData, 'JPEG', 0, position, imgWidth, imgHeight);
          heightLeft -= pageHeight;
        }

        pdf.save('ØªÙ‚Ø§Ø±ÙŠØ± Ø­ØµØµ Ø§Ù„Ø§Ù†ØªØ¸Ø§Ø± - Ø§Ù„Ø«Ø§Ù†ÙˆÙŠØ© Ø§Ù„Ø³Ø§Ø¯Ø³Ø© ÙˆØ§Ù„Ø¹Ø´Ø±ÙˆÙ† Ø¨ØªØ¨ÙˆÙƒ.pdf');
        showToast('ØªÙ… ØªØµØ¯ÙŠØ± Ù…Ù„Ù PDF Ø¨Ù†Ø¬Ø§Ø­');
      }catch(err){
        console.error(err);
        showToast('Ø­Ø¯Ø« Ø®Ø·Ø£ Ø£Ø«Ù†Ø§Ø¡ Ø§Ù„ØªØµØ¯ÙŠØ±', 'err');
      }
    });
  }

  // Ø§Ù„ØªÙ‚ÙˆÙŠÙ… Ø§Ù„Ù‡Ø¬Ø±ÙŠ Ø§Ù„Ù…Ø¨Ø³Ø· Ù„Ù„Ù†Ù…ÙˆØ°Ø¬ Ø§Ù„Ù…Ø­Ù„ÙŠ
  function initializeHijriCalendar(){
    const hijriInputs = document.querySelectorAll('.hijri-date-input');
    const calendars = document.querySelectorAll('.hijri-calendar');

    hijriInputs.forEach((input, index)=>{
      const calendar = calendars[index];
      const toggle = input.parentElement.querySelector('.hijri-toggle');

      toggle.addEventListener('click', function(e){
        e.preventDefault();
        e.stopPropagation();
        calendar.classList.toggle('active');
        if(calendar.classList.contains('active')){
          renderHijriCalendar(calendar, input);
        }
      });

      document.addEventListener('click', function(e){
        if(!calendar.contains(e.target) && e.target !== toggle){
          calendar.classList.remove('active');
        }
      });

      calendar.addEventListener('click', function(e){
        e.stopPropagation();
      });
    });

    document.querySelectorAll('.hijri-calendar').forEach(calendar=>{
      const prevYear = calendar.querySelector('.prev-year');
      const prevMonth = calendar.querySelector('.prev-month');
      const nextMonth = calendar.querySelector('.next-month');
      const nextYear = calendar.querySelector('.next-year');
      const todayBtn  = calendar.querySelector('.today-btn');

      prevYear.addEventListener('click', function(){
        currentHijriYear--;
        renderHijriCalendar(calendar, calendar.associatedInput);
      });
      prevMonth.addEventListener('click', function(){
        currentHijriMonth--;
        if(currentHijriMonth < 1){
          currentHijriMonth = 12;
          currentHijriYear--;
        }
        renderHijriCalendar(calendar, calendar.associatedInput);
      });
      nextMonth.addEventListener('click', function(){
        currentHijriMonth++;
        if(currentHijriMonth > 12){
          currentHijriMonth = 1;
          currentHijriYear++;
        }
        renderHijriCalendar(calendar, calendar.associatedInput);
      });
      nextYear.addEventListener('click', function(){
        currentHijriYear++;
        renderHijriCalendar(calendar, calendar.associatedInput);
      });

      todayBtn.addEventListener('click', function(){
        const today = getTodayHijri();
        calendar.associatedInput.value = today;
        calendar.classList.remove('active');
        showToast('ØªÙ… Ø§Ø®ØªÙŠØ§Ø± ØªØ§Ø±ÙŠØ® Ø§Ù„ÙŠÙˆÙ…');
      });
    });
  }

  function renderHijriCalendar(calendar, input){
    calendar.associatedInput = input;
    const monthYear = calendar.querySelector('.hijri-month-year');
    const daysContainer = calendar.querySelector('.hijri-days');
    const monthNames = [
      'Ù…Ø­Ø±Ù…','ØµÙØ±','Ø±Ø¨ÙŠØ¹ Ø§Ù„Ø£ÙˆÙ„','Ø±Ø¨ÙŠØ¹ Ø§Ù„Ø¢Ø®Ø±',
      'Ø¬Ù…Ø§Ø¯Ù‰ Ø§Ù„Ø£ÙˆÙ„Ù‰','Ø¬Ù…Ø§Ø¯Ù‰ Ø§Ù„Ø¢Ø®Ø±Ø©','Ø±Ø¬Ø¨',
      'Ø´Ø¹Ø¨Ø§Ù†','Ø±Ù…Ø¶Ø§Ù†','Ø´ÙˆØ§Ù„','Ø°Ùˆ Ø§Ù„Ù‚Ø¹Ø¯Ø©','Ø°Ùˆ Ø§Ù„Ø­Ø¬Ø©'
    ];

    monthYear.textContent = monthNames[currentHijriMonth-1] + ' ' + currentHijriYear;

    const daysInMonth = 30; // ØªØ¨Ø³ÙŠØ·
    let html = '';
    for(let d=1; d<=daysInMonth; d++){
      html += `<div class="hijri-day">${d}</div>`;
    }
    daysContainer.innerHTML = html;

    daysContainer.querySelectorAll('.hijri-day').forEach(dayEl=>{
      dayEl.addEventListener('click', function(){
        const day = this.textContent;
        const value = `${currentHijriYear}/${currentHijriMonth}/${day}`;
        input.value = value;
        calendar.classList.remove('active');
        showToast('ØªÙ… Ø§Ø®ØªÙŠØ§Ø± Ø§Ù„ØªØ§Ø±ÙŠØ®');
      });
    });
  }

  function getTodayHijri(){
    const today = new Date();
    // ØªÙ‚Ø±ÙŠØ¨ Ø¨Ø³ÙŠØ·: Ø³Ù†Ø© Ù‡Ø¬Ø±ÙŠØ© Ø«Ø§Ø¨ØªØ© + Ø´Ù‡Ø±/ÙŠÙˆÙ… Ù…Ù† Ø§Ù„Ù…ÙŠÙ„Ø§Ø¯ÙŠ
    return `1447/${today.getMonth()+1}/${today.getDate()}`;
  }

  document.addEventListener('DOMContentLoaded', function() {
    console.log('Ù†Ø¸Ø§Ù… Ø§Ù„ØªÙ‚Ø§Ø±ÙŠØ± Ø¬Ø§Ù‡Ø² Ù„Ù„Ø§Ø³ØªØ®Ø¯Ø§Ù…');
    waitLoadSessions();
    initializeWaitSessionManagement();
    initializeWaitSessionsExport();
    initializeHijriCalendar();
  });
</script>

</body>
</html>
